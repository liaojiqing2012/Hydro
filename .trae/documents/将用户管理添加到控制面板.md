# 将用户管理添加到控制面板

## 问题分析

当前用户管理插件无法在控制面板中显示，主要原因是使用了错误的UI注册方法。插件中使用了`ctx.ui.registerMenuItem`，但实际上Hydro系统使用的是`ctx.ui.inject`方法来注册菜单项。

## 解决方案

### 1. 修改插件注册代码

将插件中的`registerPages`方法修改为使用正确的`inject`方法，将用户管理菜单项注入到`ControlPanel`中：

```typescript
private registerPages(ctx: Context) {
    // 注入到控制面板
    ctx.ui.inject('ControlPanel', 'user-management', {
        text: '用户管理',
        href: '/admin/users',
        icon: 'account--multiple',
        order: 100
    });
}
```

### 2. 确保权限控制正确

添加适当的权限检查，确保只有管理员可以访问用户管理功能：

```typescript
ctx.ui.inject('ControlPanel', 'user-management', {
    text: '用户管理',
    href: '/admin/users',
    icon: 'account--multiple',
    order: 100
}, PRIV.PRIV_EDIT_SYSTEM);
```

### 3. 保持与现有控制面板项一致

确保用户管理项的显示顺序和图标与现有控制面板项保持一致，提供良好的用户体验。

## 实现步骤

1. 修改`packages/user-management/index.ts`文件中的`registerPages`方法
2. 导入`PRIV`常量用于权限检查
3. 使用`ctx.ui.inject`替代`ctx.ui.registerMenuItem`
4. 注入到`ControlPanel`区域而不是`admin`区域
5. 添加适当的权限控制

## 预期效果

修改完成后，管理员登录系统后，在控制面板中可以看到"用户管理"菜单项，点击后可以进入用户管理页面，实现对用户的全面管理功能。